<!DOCTYPE html>
<html lang="en">

<head style="margin: 0;">
    <script type="text/javascript" src="client/hebcal.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>ספירת העומר</title>
    <style>
        .time {
            margin-top: 0;
            width: 100vw;
            text-align: center;
            z-index: 10;
        }

        .zmanim-box {
            margin-top: 15vh;
            z-index: 10;
            display: flex;
            justify-content: space-around;
        }
    </style>
</head>

<body>
    <div id="omer" style="width: 100%; height: 100%; display: flex;">
        <h1 id="time" class="time" ></h1>
        <div class="zmanim-box">
            <h1 id="shma" style="text-align: inherit;width: 50vw;"></h1>
            <h1 id="sunset" style="text-align: -webkit-center; width: 50vw;"  ></h1>
        </div>
        <h1 id="daf_yomi" ></h1>
        
        
        <img alt="יש שגיאה במערכת" style="width: 100%; height: 100%; position: fixed; top: 0; left: 0;">
    </div>
    <script type="text/javascript">
        function refresh() {
            let date = new Date();
            document.querySelector('#time').innerText = format_time(date);
            date = date.setMinutes(date.getMinutes() - 18);
            var day = new Hebcal.HDate();
            if (day.sunset() < date) {
                day = day.next();
            }
            var omerDay = day.omer();
            let daf = day.dafyomi();
            document.querySelector('#omer img').src = 'images/SfiratHaomer' + omerDay + '.jpg';
            document.querySelector('#sunset').innerText = 'שקיעה:  ' + format_time(day.sunset());
            document.querySelector('#shma').innerText = 'סו"ז קר"ש ב:  ' + format_time(day.getZemanim().sof_zman_shma);
            document.querySelector('#daf_yomi').innerText = 'דף היומי בבלי:  ' + day.dafyomi('h');
            setTimeout('refresh()', 1000);



        }

        function format_time(date) {
            return pad(date.getHours()) + ':' + pad(date.getMinutes()) + ':' + pad(date.getSeconds());
        }

        function pad(n) {
            return (n < 10) ? ("0" + n) : n;
        }
        Hebcal.events.on('ready', refresh());
    </script>
</body>

</html>

</html>